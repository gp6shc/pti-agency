.site-header {
	width: 100%;
	min-width: 320px;
	position: fixed;
	z-index: 1000;
	top: 0;
	transition: transform 300ms cubic-bezier(0.4, 0.01, 0.165, 0.99);
	
	&.small {
  	transform: translateY(-91px);
  	
  	svg,img {
			transform: scale(0.6) translateY(10px);  	
  	}
  }
  
  svg,img {
		transition: transform 300ms cubic-bezier(0.4, 0.01, 0.165, 0.99);
		transform-origin: bottom left;
  }
  
}

.top-bar {
	height: 52px;
	background-color: $brand-black;
	color: white;
	font-size: 0.875em;
	
	.contain {
		display: flex;
		justify-content: flex-end;
		align-items: center;
	}
	
	span + span {
		margin-left: 3.4%;
	}
}

.user-actions {
	a {
		color: white;
		text-decoration: none;
				
		+ a {
				margin-left: 8px;
				border-left: 1px solid white;
				padding-left: 8px;
		}
		
		&:hover {
			color: lighten($secondary-blue, 5%);
		}
		
		&:focus {
			color: lighten($secondary-blue, 5%);
		}
	}
}

.search-form {
	margin-right: 0;
	
	form {
		display: inline-block;
	}
}

.search {
	color: $brand-grey;
	text-align: center;
	text-transform: uppercase;
	padding: 4px;
	border-radius: 0;
	border-top-left-radius: 5px;
	border-bottom-left-radius: 5px;
	border: 2px solid white;
	-webkit-appearance: none;
	appearance: none;
	transition: border-color 200ms;
	
	&:focus {
		outline: none;
		border-color: darken($brand-green, 5%);
	}
}

.submit-search {
	padding: 4px 7px;
	margin-left: -4px;
	background-color: $brand-green;
	background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z" fill="#fff"/></svg>');
	background-repeat: no-repeat;
  background-position: 46% 25%;
  background-size: 66%;
	border-top-right-radius: 5px;
	border-bottom-right-radius: 5px;
	border: 2px solid $brand-green;
	transition: border-color 200ms, background-color 200ms;
	color: transparent;
	
	&:hover {
		border-color: darken($brand-green, 5%);
		background-color: darken($brand-green, 5%);
		animation: pulseGreen 1s infinite;
	}
	
	&:focus {
		border-color: darken($brand-green, 5%);
		background-color: darken($brand-green, 5%);
		outline: none;
		animation: pulseGreen 1s infinite;
	}
}

@keyframes pulseGreen {
	0%, 100% {border-color: darken($brand-green, 8%);background-color: darken($brand-green, 8%);}
	50% 		 {border-color: $brand-green;background-color: $brand-green;}	
}

.site-nav {
	height: 90px;
	color: white;
	background-color: $primary-blue;
	position: relative;
	width: 100%;
	
	> .contain {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}
	
	svg {
		width: 253px;
    height: 66px;
	}
	img {
		height: 80px;
	}
}

.menu-contain {
	height: 57%;
	align-self: flex-end;	
}
.menu {
	list-style: none;
	margin: 0;
	padding: 0;
	font-size: 0; // remove space between inline-block neighbors
	white-space: nowrap;
	
	> li {
		font-size: 1.1rem;
		display: inline-block;
		transition: background-color 200ms;
		
		> a {
			display: block;
			padding: 13px 15px 16px;
		}
		
		&:hover {
			background-color: mix($primary-blue, $secondary-blue, 50%);
			cursor: pointer;
		}
		
		&.active {
			background-color: $secondary-blue;
		}
	}
	
	a {
		color: white;
		text-decoration: none;
	}
}

.hasSubMenu {
	padding: 13px 9px 16px 15px;
	
	&:after {
		content: '';
		background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z" fill="#fff"/></svg>');
		background-repeat: no-repeat;
		width: 16px;
		height: 16px;
		display: inline-block;
		margin-left: 3px;
		background-position-y: 480%;
	}
	
	&.active:after {
		background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 998 998" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M595,499 L988,106 C994.666667,99.3333333 998,91.6666667 998,83 C998,74.3333333 994.666667,66.6666667 988,60 L938,10 C931.333333,3.33333333 923.666667,0 915,0 C906.333333,0 898.666667,3.33333333 892,10 L499,403 L106,10 C99.3333333,3.33333333 91.6666667,0 83,0 C74.3333333,0 66.6666667,3.33333333 60,10 L10,60 C3.33333333,66.6666667 0,74.3333333 0,83 C0,91.6666667 3.33333333,99.3333333 10,106 L403,499 L10,892 C3.33333333,898.666667 0,906.333333 0,915 C0,923.666667 3.33333333,931.333333 10,938 L60,988 C66.6666667,994.666667 74.3333333,998 83,998 C91.6666667,998 99.3333333,994.666667 106,988 L499,595 L892,988 C898.666667,994.666667 906.333333,998 915,998 C923.666667,998 931.333333,994.666667 938,988 L988,938 C994.666667,931.333333 998,923.666667 998,915 C998,906.333333 994.666667,898.666667 988,892 L595,499 Z" fill="#FFFFFF"></path></g></svg>');
    background-size: 55%;
    background-position: 50% 80%;
	}
}

.sub-menu {
	display: flex;
	justify-content: space-between;
	position: absolute;
	left: 0;
	right: 0;
	width: 100%;
	bottom: 0;
	font-size: 0.75em;
	background-color: $secondary-blue;
	padding-top: 25px;
	padding-bottom: 25px;
	height: auto;
	transition: transform 400ms cubic-bezier(0.4, 0.01, 0.165, 0.99);
	z-index: -1;
	cursor: default;
	white-space: normal;
	
	&.open {
		transform: translateY(100%);		
	}
	
	ul {
		padding: 0;
		//width: 20%;
		list-style: none;
		
		li {
			padding: 0;
			font-weight: 100;
		}
		
		+ ul {
			margin-left: 14px;
		}
	}
	
	a {
		display: block;
		padding: 3px 0;
		
		&:hover {
			text-decoration: underline;
		}
	}
	.title {
		text-transform: uppercase;
		font-weight: 700;
		padding-bottom: 5px;
	}
}

.hamburger {
	display: none;
}

@media (max-width: 700px) {
	header.small {
		.menu-contain {
			transform: translate(100%, 91px);
			
			&.open {
				transform: translate(0, 91px);
			}
		}
		.hamburger {
			transform: translateY(18px);
		}
	}
	
	.menu-contain {
		position: absolute;
		width: 80%;
		top: -52px;
		right: 0;
		height: 100vh;
		background: $brand-black;
		overflow: visible;
		z-index: 1;
		transform: translateX(100%);
		transition: transform 400ms cubic-bezier(0.4, 0.01, 0.165, 0.99);
		
		&::after {
			content: '';
			width: 140%;
			height: 100%;
			background-color: rgba(white, 0.77);
			opacity: 0;
			left: -140%;
			position: absolute;
			top: 0;
			box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
			pointer-events: none;
			transition: opacity 300ms 230ms linear, box-shadow 200ms linear, -webkit-backdrop-filter 200ms 230ms linear;
		}
		
		&.open {
			transform: translateX(0);
			
			.menu > li {
				transform: translateX(0);
				opacity: 1;
			}
			
			&::after {
				opacity: 1;
				box-shadow: inset -20px 0 25px -20px black;
				-webkit-backdrop-filter: blur(3px);
				backdrop-filter: blur(3px);
				transition-delay: 0;
			}
		}
	}
	
	.menu {
		> li {
			display: block;
			background-color: $brand-black;
			width: 100%;
			transform: translateX(25%);
			opacity: 0;
			transition: transform 340ms cubic-bezier(0.4, 0.01, 0.165, 0.99), opacity 350ms;
			transition-delay: 0;
			
			@for $i from 1 through 5 {
				&:nth-child(#{$i}) {
					transition-delay: 100ms * ($i + 1), 100ms * ($i + 1) + 30;
				}	
			}
			
			+ li {
				border-top: 1px solid darken($brand-black, 5%);
			}
		}
	}
	
	.hasSubMenu {
		position: relative;
				
		&::after {
			position: absolute;
			right: 5px;
			top: 3px;
			padding: 10px;
		}	
	}
	
	.sub-menu {
		max-height: 0;
		overflow: auto;
		-webkit-overflow-scrolling: touch;
		background: transparent;
		position: static;
		padding-top: 0;
		padding-bottom: 0;
		flex-wrap: wrap;
		transition: max-height 300ms cubic-bezier(0.4, 0.01, 0.165, 0.99), padding 200ms linear;
		
		&.open {
			max-height: calc(100vh - 260px);
			transform: none;
			padding-top: 10px;
			padding-bottom: 25px;
		}
		
		ul {
			width: 40%;
			
			&:nth-child(2n - 1) {
				padding-right: 15px;
				width: 60%
			}
			
			+ ul {
				margin: 0;
			}
		}
		
		.title {
			margin-top: 15px;			
			padding-bottom: 0;
		}
	}
	
	.hamburger {
		display: block;
		width: 37px;
		height: 37px;
		background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z" fill="#fff"/></svg>');
		background-size: 77%;
		border-radius: 3px;
		background-position: center center;
		background-repeat: no-repeat;
		transition: background-color 300ms 350ms, transform 300ms linear;
		
		&:hover {
			background-color: $secondary-blue;
			cursor: pointer;
			transition-delay: 0ms;
		}
	}
}

@media (max-width: 600px) {
	.top-bar .contain {
		justify-content: space-between;
	}
	.login-status {
		width: 90px;
	}
}

@media (max-width: 520px) {
	.top-bar {
		font-size: 0.8em;
		
		span + span {
			margin: 0;
		}
	}
	.login-status {
		width: 80px;
	}
	.search-form form {
		position: relative;
	}	
	.search {
		position: absolute;
    width: 0;
    right: 88%;
    transition: width 300ms 1s, background-color 200ms 1s;
    z-index: 0;
    border-color: $brand-green;
    background-color: $brand-green;
    
    &:focus {
	    background-color: white;
	    width: 50vw;
	    transition-delay: 0s;
    }
	}
	.submit-search {
		position: relative;
		z-index: 1;
	}
}

@media (max-width: 450px) {
	.menu-contain {
		width: 90%;
	}
}

@media (max-width: 400px) {
	.sub-menu {
		ul {
			width: 100%;
			
			&:nth-child(2n - 1) {
				width: 100%;
				padding: 0;
			}
		}
	}
}

@media (max-width: 768px) {
	.hasSubMenu {
		padding: 13px 6px 16px 9px;
	}
	.menu > li > a {
		padding: 13px 9px 16px;
	}
}